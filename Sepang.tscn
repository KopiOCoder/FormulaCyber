[gd_scene load_steps=14 format=3 uid="uid://dt741ube6e8dx"]

[ext_resource type="Script" uid="uid://b5nyb8vyhpw8r" path="res://race_mode.gd" id="1_kxd4r"]
[ext_resource type="Texture2D" uid="uid://boeexqmqafa51" path="res://kenney_prototype-textures/PNG/Dark/texture_10.png" id="2_hhj1m"]
[ext_resource type="PackedScene" uid="uid://bdqwyaonx15xh" path="res://Raycast_car.tscn" id="2_tg8fv"]
[ext_resource type="Texture2D" uid="uid://c6syo0nrqnfui" path="res://kenney_prototype-textures/PNG/Light/texture_04.png" id="3_kxd4r"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_hhj1m"]

[sub_resource type="Sky" id="Sky_kxd4r"]
sky_material = SubResource("ProceduralSkyMaterial_hhj1m")

[sub_resource type="Environment" id="Environment_iayo1"]
background_mode = 2
background_energy_multiplier = 1.8
sky = SubResource("Sky_kxd4r")
ambient_light_energy = 2.01

[sub_resource type="Curve3D" id="Curve3D_tg8fv"]
closed = true
_data = {
"points": PackedVector3Array(5.07997, 0, 0.0961446, -5.07997, 0, -0.0961446, 59.2507, 0, 0.0752834, 0, 0, 0, 0, 0, 0, 44.3529, 0, -0.0311296, 0.968126, 0, 0.126933, -0.968126, 0, -0.126933, 29.7743, 0, 0.0752834, 0.0236053, 0, 1.72092, -0.0236053, 0, -1.72092, 27.0382, 0, -1.98106, -0.590515, 0, 0.100822, 0.590515, 0, -0.100822, 29.7743, 0, -4.18123, -0.100597, 0, 0.982963, 0.100597, 0, -0.982963, 33.4988, 0, -5.03253, 1.1678, 0, 0.564373, -1.1678, 0, -0.564373, 30.8385, 0, -7.58643, -0.627417, 0, 2.64754, 0.627417, 0, -2.64754, 28.6038, 0, -14.8225, -2.35994, 0, 1.55699, 2.35994, 0, -1.55699, 31.7962, 0, -19.2918, -5.41266, 0, 3.23247, 5.41266, 0, -3.23247, 51.6954, 0, -24.2932, -1.67754, 0, -2.17672, 1.67754, 0, 2.17672, 57.3352, 0, -12.8007, -1.62925, 0, 0.53189, 1.62925, 0, -0.53189, 62.4431, 0, -10.3532, -0.813454, 0, 1.18819, 0.813454, 0, -1.18819, 65.4226, 0, -13.4391, -2.35174, 0, 0.176447, 2.35174, 0, -0.176447, 69.2535, 0, -16.7379, 0, 0, 0, 0, 0, 0, 73.3598, 0, -13.8826, -0.68959, 0, -1.94511, 0.68959, 0, 1.94511, 84.3641, 0, 1.24582, 1.05798, 0, -0.341908, -1.05798, 0, 0.341908, 80.608, 0, 5.77671, 0, 0, 0, 0, 0, 0, 60.5276, 0, 6.99211, -0.0261917, 0, -1.29106, 0.0261917, 0, 1.29106, 57.4417, 0, 8.5883, -0.98394, 0, -2.68537, 0.98394, 0, 2.68537, 64.1457, 0, 13.0576, 3.49271, 0, -0.359489, -3.49271, 0, 0.359489, 62.1238, 0, 20.4001, 2.96099, 0, 0.0739202, -2.96099, 0, -0.0739202, 48.7158, 0, 13.8025, 3.06226, 0, -0.0698967, -3.06226, 0, 0.0698967, 41.9054, 0, 17.2077, -2.28756, 0, 3.85188, 2.28756, 0, -3.85188, 34.7757, 0, 7.30792, 0.124237, 0, 3.23033, -0.124237, 0, -3.23033, 73.1995, 0, 2.05914),
"tilts": PackedFloat32Array(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0)
}
point_count = 25

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_kxd4r"]
albedo_texture = ExtResource("2_hhj1m")

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_iayo1"]
albedo_texture = ExtResource("3_kxd4r")

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_41rac"]
albedo_texture = ExtResource("3_kxd4r")

[sub_resource type="BoxShape3D" id="BoxShape3D_kxd4r"]
size = Vector3(10, 10, 14)

[sub_resource type="BoxShape3D" id="BoxShape3D_iayo1"]
size = Vector3(10, 10, 14)

[node name="Node3D" type="Node3D" node_paths=PackedStringArray("player")]
script = ExtResource("1_kxd4r")
player = NodePath("Nissan GTR")

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_iayo1")

[node name="Path3D" type="Path3D" parent="."]
transform = Transform3D(15, 0, 0, 0, 15, 0, 0, 0, 15, 0, 0, 0)
curve = SubResource("Curve3D_tg8fv")

[node name="CSGPolygon3D" type="CSGPolygon3D" parent="."]
material_override = SubResource("StandardMaterial3D_kxd4r")
use_collision = true
mode = 2
path_node = NodePath("../Path3D")
path_interval_type = 0
path_interval = 0.1
path_simplify_angle = 0.0
path_rotation = 2
path_rotation_accurate = false
path_local = false
path_continuous_u = true
path_u_distance = 1.0
path_joined = true

[node name="CSGPolygon3D2" type="CSGPolygon3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 4.40042, 0)
material_override = SubResource("StandardMaterial3D_iayo1")
use_collision = true
polygon = PackedVector2Array(0.5, 0, 1, 1, 1, 1, 1, 0)
mode = 2
path_node = NodePath("../Path3D")
path_interval_type = 0
path_interval = 0.1
path_simplify_angle = 0.0
path_rotation = 2
path_rotation_accurate = false
path_local = false
path_continuous_u = true
path_u_distance = 1.0
path_joined = false

[node name="CSGPolygon3D3" type="CSGPolygon3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 4.54891, 0)
material_override = SubResource("StandardMaterial3D_41rac")
use_collision = true
polygon = PackedVector2Array(0, 0, 0, 1, 0.1, 0.5, 1, 0)
mode = 2
path_node = NodePath("../Path3D")
path_interval_type = 0
path_interval = 0.1
path_simplify_angle = 0.0
path_rotation = 2
path_rotation_accurate = false
path_local = false
path_continuous_u = true
path_u_distance = 1.0
path_joined = false

[node name="Nissan GTR" parent="." instance=ExtResource("2_tg8fv")]
transform = Transform3D(-4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, 1238.05, 16.3255, -13.1918)

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="LapTimeLabel" type="Label" parent="CanvasLayer"]
offset_right = 40.0
offset_bottom = 23.0

[node name="LapsLeftLabel" type="Label" parent="CanvasLayer"]
offset_left = 1.0
offset_top = 30.0
offset_right = 41.0
offset_bottom = 53.0

[node name="Finish_line" type="Area3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 935.188, 9.03987, 0)

[node name="CollisionShape3D" type="CollisionShape3D" parent="Finish_line"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 42.4214, 5.3651, -8.78325)
shape = SubResource("BoxShape3D_kxd4r")

[node name="Middle_line" type="Area3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1245.21, 10.5004, 0)

[node name="CollisionShape3D" type="CollisionShape3D" parent="Middle_line"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 7.07932, 0)
shape = SubResource("BoxShape3D_iayo1")
debug_fill = false

[connection signal="body_entered" from="Finish_line" to="." method="_on_finish_line_body_entered"]
[connection signal="body_entered" from="Middle_line" to="." method="_on_middle_line_body_entered"]
